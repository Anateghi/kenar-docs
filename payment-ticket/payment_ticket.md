فلوی تیکت پرداخت
---
در شرایطی نیاز است تا دیوار برای پرداخت های کاربر اسپانسر شود. برای مثال برای کاربری که بلک لیست شده و قصد آزادسازی با احراز را دارد ، میخواهیم احراز برای کاربر رایگان باشد. به این صورت ، نیاز است با پروتکل خاصی این مهم به سرویس پروایدر ارسال شود و به صورت یک فاکتور پرداختی برای دیوار ذخیره شود.
در صفحه ی لیست سرویس پروایدر ها ، این مسئله به صورت یک `quary param` روی اکشن کلیک روی هر کدام از `fallback url` سرویس پروایدر‌ها قرار داده می‌شود. سرویس پروایدر باید در ابتدا این پارامتر `ticket_uuid` را استخراج کند. اگر این پارامتر در کوئری پارام های ریکوئست وجود داشت و کاربر تا انتهای فلو را دنبال کرد ، باید اندپورینت `validate` این سرویس با تیکت مورد نظر فراخوانی شود تا از صحت آن اطمینان حاصل شود. پس از آنکه valid بودن تیکت محرز شد ، کاربر نباید به درگاه پرداخت ارجاع شود. در عوض هنگام ساخت افزونه ی `USER ADDON` باید در body ریکوئست فیلد `ticket_uuid` با مقدار فرستاده شده ، قرار داده شود تا این تیکت برای این سرویس پروایدر مصرف شده و فاکتور پرداخت برای آن ساخته شود.

-  [ساخت تیکت توسط اپ های دیوار](generate.md)
-  [اعتبار‌ستجی تیکت توسط سرویس پروایدر ها](validate.md)
